{% extends "/layouts/default.html" %}
{% append "javascript" %}
<script type="text/javascript" src="/duffel-auth/javascript/applications/forgot-password/application.js"></script>
<script type="text/javascript" src="/duffel-auth/javascript/applications/forgot-password/controllers.js"></script>
{% endappend %}

{% block title %}Forgot Password - {% endblock %}

{% block content %}
<div class="container login-wrapper" ng-app="forgotPassword" ng-controller="ForgotPasswordController">
    <div ng-hide="emailed" ng-animate="'fade'">
        {% cmsblock { name: "forgot-password-form-header" } %}
        <p class="lead text-center">Forgot Password</p>
        <p class="text-center">Request a password reset</p>
        {% endcmsblock %}
        <form class="container login-inner" action="" method="post" ng-submit="submit()" novalidate>
            <div ng-cloak ng-show="error" class="alert alert-error">
                <strong>Unexpected Error</strong> Please try again
            </div>
            <fieldset>
                <label for="email">Email</label>
                <input ng-model="user.email" type="email" name="email" placeholder="you@domain.com" id="email" />
            </fieldset>
            <input ng-model="user._csrf" ng-init="user._csrf = '{$ _csrf $}'" type="hidden" name="_csrf" value="{{ _csrf }}" />
            <div class="text-right">
                <button ng-enabled="user.email" type="submit" class="btn btn-success">Request Reset</button>
            </div>
        </form>
    </div>
    <div ng-show="emailed" ng-animate="'fade'">
        {% cmsblock { name: "forgot-password-emailed" } %}
        <p class="lead">
            An email containing a reset link has been sent to 
            <strong>{{ user.email }}</strong>
        </p>
        {% endcmsblock %}
    </div>
</div>
{% endblock %}

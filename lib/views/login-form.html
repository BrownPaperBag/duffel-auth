{% block content %}
<div class="container login-wrapper angular-application" application-name="login" ng-controller="LoginController">
    {% cmsblock { name: "login-form-header" } %}
    <p class="lead text-center">Login</p>
    {% endcmsblock %}
    <form class="container login-inner" action="" method="post" ng-submit="login()" novalidate>
        <div ng-cloak ng-show="error" class="alert alert-error">
            <div ng-switch on="error">
                <div ng-switch-when="401">
                    <strong>Invalid credentials</strong>
                </div>
                <div ng-switch-default>
                    <strong>Unexpected Error</strong> Please try again. 
                </div>
            </div>
        </div>
        <fieldset>
            <label for="email">Email</label>
            <input ng-model="user.email" type="email" name="email" placeholder="you@domain.com" id="email" />
        </fieldset>
        <fieldset>
            <label for="password">Password</label>
            <input ng-model="user.password" type="password" name="password" placeholder="your password" id="password" />
        </fieldset>
        <input ng-model="user._csrf" ng-init="user._csrf = '{$ _csrf $}'" type="hidden" name="_csrf" value="{{ _csrf }}" />
        <div class="text-right">
            <a href="register" class="btn btn-info">Register</a>
            <button ng-disabled="!user.password || !user.email || submitting" type="submit" class="btn btn-success">Login <i ng-class="{'icon-arrow-right':!submitting, 'icon-spinner icon-spin':submitting}"></i></button>
        </div>
        <a ng-show="failedOnce" class="pull-right" href="/forgot-password">Forgot password</a>
    </form>
</div>
{% endblock %}
